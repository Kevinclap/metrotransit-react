(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{156:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),s=n(15),o=n.n(s),i=(n(69),n(21)),c=n(22),u=n(25),l=n(23),p=n(24),h=(n(71),n(73),n(75),n(77),n(158)),f=function(){return a.a.createElement("div",null,a.a.createElement(h.a,{inverse:!0,collapseOnSelect:!0},a.a.createElement(h.a.Header,null,a.a.createElement(h.a.Brand,null,a.a.createElement("a",{href:"http://svc.metrotransit.org/",target:"_blank",rel:"noopener noreferrer"},"Metro Transit")))))},d=n(37),v=n(2),m=n.n(v),b=n(4),x=n(6),g=n(35),j=n(61),w=n(62),k=n(8),y=n.n(k);function O(){return E.apply(this,arguments)}function E(){return(E=Object(b.a)(m.a.mark(function t(){var e,n,r;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"https://svc.metrotransit.org/NexTrip/Routes?format=json",t.prev=1,t.next=4,y.a.get("https://svc.metrotransit.org/NexTrip/Routes?format=json");case 4:return e=t.sent,n=e.data,r=[],n.forEach(function(t){r.push(t.Description)}),t.abrupt("return",r);case 11:t.prev=11,t.t0=t.catch(1),console.error("This is error: ",t.t0);case 14:case"end":return t.stop()}},t,this,[[1,11]])}))).apply(this,arguments)}function T(t,e,n,r){return C.apply(this,arguments)}function C(){return(C=Object(b.a)(m.a.mark(function t(e,n,r,a){var s,o,i,c,u,l,p,h;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get(e);case 3:s=t.sent,o=s.data,i=!0,c=!1,u=void 0,t.prev=8,l=o[Symbol.iterator]();case 10:if(i=(p=l.next()).done){t.next=17;break}if(h=p.value,a!==h[n]){t.next=14;break}return t.abrupt("return",h[r]);case 14:i=!0,t.next=10;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(8),c=!0,u=t.t0;case 23:t.prev=23,t.prev=24,i||null==l.return||l.return();case 26:if(t.prev=26,!c){t.next=29;break}throw u;case 29:return t.finish(26);case 30:return t.finish(23);case 31:t.next=36;break;case 33:t.prev=33,t.t1=t.catch(0),console.error("This is error: ",t.t1);case 36:case"end":return t.stop()}},t,this,[[0,33],[8,19,23,31],[24,,26,30]])}))).apply(this,arguments)}function S(t){return R.apply(this,arguments)}function R(){return(R=Object(b.a)(m.a.mark(function t(e){var n,r,a,s,o;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"https://svc.metrotransit.org/NexTrip/Routes?format=json",t.next=3,T("https://svc.metrotransit.org/NexTrip/Routes?format=json","Description","Route",e);case 3:return n=t.sent,r="https://svc.metrotransit.org/NexTrip/Directions/"+n+"?format=json",t.prev=5,t.next=8,y.a.get(r);case 8:return a=t.sent,s=a.data,o=[],s.forEach(function(t){o.push(t)}),t.abrupt("return",o);case 15:t.prev=15,t.t0=t.catch(5),console.error("This is error: ",t.t0);case 18:case"end":return t.stop()}},t,this,[[5,15]])}))).apply(this,arguments)}function D(t,e){return N.apply(this,arguments)}function N(){return(N=Object(b.a)(m.a.mark(function t(e,n){var r,a,s,o,i,c,u;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"https://svc.metrotransit.org/NexTrip/Routes?format=json",t.next=3,T("https://svc.metrotransit.org/NexTrip/Routes?format=json","Description","Route",e);case 3:return r=t.sent,a="https://svc.metrotransit.org/NexTrip/Directions/"+r+"?format=json",t.next=7,T(a,"Text","Value",n);case 7:return s=t.sent,o="https://svc.metrotransit.org/NexTrip/Stops/"+r+"/"+s+"?format=json",t.prev=9,t.next=12,y.a.get(o);case 12:return i=t.sent,c=i.data,u=[],c.forEach(function(t){u.push(t.Text)}),t.abrupt("return",u);case 19:t.prev=19,t.t0=t.catch(9),console.error("This is error: ",t.t0);case 22:case"end":return t.stop()}},t,this,[[9,19]])}))).apply(this,arguments)}var B=n(36),L=n.n(B);function q(t,e,n){return M.apply(this,arguments)}function M(){return(M=Object(b.a)(m.a.mark(function t(e,n,r){var a,s,o,i,c,u,l,p,h,f,d,v;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=function(){return(o=Object(b.a)(m.a.mark(function t(e){var n,r,a,s;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.substring(6,16),r=L()(n,"X").unix(),a=L()().unix(),s=parseInt((r-a)/60),t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}))).apply(this,arguments)},s=function(t){return o.apply(this,arguments)},i=(a="https://svc.metrotransit.org/NexTrip/")+"Routes?format=json",t.next=6,T(i,"Description","Route",e);case 6:if(c=t.sent){t.next=9;break}return t.abrupt("return",console.log(e+" is not a valid route."));case 9:return u=a+"Directions/"+c+"?format=json",t.next=12,T(u,"Text","Value",n);case 12:if(l=t.sent){t.next=15;break}return t.abrupt("return",console.log(e+" doesn't go "+n));case 15:return p=a+"Stops/"+c+"/"+l+"?format=json",t.next=18,T(p,"Text","Value",r);case 18:if(h=t.sent){t.next=21;break}return t.abrupt("return",console.log(r+" it's not a valid stop for route "+e+" "+n));case 21:return f=a+c+"/"+l+"/"+h+"?format=json",t.next=24,T(f,"RouteDirection","DepartureTime",n);case 24:if(d=t.sent){t.next=27;break}return t.abrupt("return",console.log("Could not get next connection"));case 27:return t.next=29,s(d);case 29:if(!((v=t.sent)>1)){t.next=35;break}return console.log("Next bus arriving in ",v," minutes!"),t.abrupt("return","Next bus arriving in "+v+" minutes!");case 35:return console.log("Next bus arriving in 1 minute or less"),t.abrupt("return","Next bus arriving in 1 minute or less");case 37:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}var W=function(t){function e(){var t;return Object(i.a)(this,e),(t=Object(u.a)(this,Object(l.a)(e).call(this))).state={filteredRoutes:null,direction:null,filteredStops:null,nextBus:null,disabledButton:"disabled"},t.filterRoutes=t.filterRoutes.bind(Object(x.a)(Object(x.a)(t))),t.onDirectionChange=t.onDirectionChange.bind(Object(x.a)(Object(x.a)(t))),t.filterStops=t.filterStops.bind(Object(x.a)(Object(x.a)(t))),t.handleClick=t.handleClick.bind(Object(x.a)(Object(x.a)(t))),t}return Object(p.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=Object(b.a)(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O();case 2:this.routes=t.sent;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getDirectionsFromDropdownSelect",value:function(){var t=Object(b.a)(m.a.mark(function t(e){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(e);case 2:this.directions=t.sent,this.setState({direction:this.directions});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"filterRoutes",value:function(t){var e=this;setTimeout(function(){var n;n=0===t.query.length?Object(d.a)(e.routes):e.routes.filter(function(e){return e.toLowerCase().startsWith(t.query.toLowerCase())}),e.setState({filteredRoutes:n})},250)}},{key:"onDirectionChange",value:function(){var t=Object(b.a)(m.a.mark(function t(e){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.setState({direction:e.value}),!e.value){t.next=5;break}return t.next=4,D(this.state.route,e.value.Text);case 4:this.stops=t.sent;case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"filterStops",value:function(t){var e=this;setTimeout(function(){var n;n=0===t.query.length?Object(d.a)(e.stops):e.stops.filter(function(e){return e.toLowerCase().startsWith(t.query.toLowerCase())}),e.setState({filteredStops:n})},250)}},{key:"handleClick",value:function(){var t=Object(b.a)(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q(this.state.route,this.state.direction.Text,this.state.stop);case 2:this.nextBus=t.sent,this.setState({nextBus:this.nextBus});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return a.a.createElement("div",{style:{paddingLeft:"10px",paddingTop:"10px"}},a.a.createElement("div",null,a.a.createElement("h3",null,"Choose a Route"),a.a.createElement(g.AutoComplete,{value:this.state.route,suggestions:this.state.filteredRoutes,completeMethod:this.filterRoutes,size:50,placeholder:"Routes",dropdown:!0,minLength:1,onChange:function(e){return t.setState({route:e.value})},onSelect:function(e){return t.getDirectionsFromDropdownSelect(e.value)}})),a.a.createElement("div",null,this.directions&&0!==this.directions.length&&a.a.createElement("div",{style:{justifyContent:"center",alignItems:"center"}},a.a.createElement("h3",null,"Choose a Direction"),a.a.createElement(j.ListBox,{value:this.state.direction,options:this.directions,onChange:this.onDirectionChange,optionLabel:"Text",style:{justifyContent:"center"}}))),this.stops&&0!==this.stops.length&&a.a.createElement("div",null,a.a.createElement("h3",null,"Choose a Stop"),a.a.createElement(g.AutoComplete,{value:this.state.stop,suggestions:this.state.filteredStops,completeMethod:this.filterStops,size:50,placeholder:"Stops",dropdown:!0,minLength:1,onChange:function(e){return t.setState({stop:e.value,disabledButton:""})}})),a.a.createElement("div",{style:{paddingTop:"10px"}},a.a.createElement(w.Button,{label:"Submit",onClick:this.handleClick,disabled:this.state.disabledButton})),this.nextBus?a.a.createElement("h4",null,this.nextBus):null)}}]),e}(r.Component),A=function(t){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("div",{className:"Header"},a.a.createElement(f,null)),a.a.createElement("div",{className:"App"},a.a.createElement(W,null)))}}]),e}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},63:function(t,e,n){t.exports=n(156)},69:function(t,e,n){},71:function(t,e,n){}},[[63,2,1]]]);
//# sourceMappingURL=main.471685a9.chunk.js.map